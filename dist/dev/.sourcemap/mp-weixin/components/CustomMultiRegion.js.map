{"version":3,"sources":["webpack:///./src/components/CustomMultiRegion.vue?b00f","webpack:///./src/components/CustomMultiRegion.vue?8765","webpack:///./src/components/CustomMultiRegion.vue?8c1b","webpack:///./src/components/CustomMultiRegion.vue?1b97","uni-app:///src/components/CustomMultiRegion.vue"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0I;AAC1I;AACqE;AACL;;;AAGhE;AACgI;AAChI,gBAAgB,gJAAU;AAC1B,EAAE,uFAAM;AACR,EAAE,wGAAM;AACR,EAAE,iHAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,4GAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA+b,CAAgB,0eAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;ACcnd;;AACA;;AACA;;;;;;;;;;;;;;gBAEA;AACA,2BADA;AAEA;AACA;AACA;AACA,iBADA;AAEA;AAAA;AAAA;AAFA;AAFA,GAFA;AASA;AACA;AADA,GATA;AAYA,MAZA,kBAYA;AACA;AACA;AADA;AAGA,GAhBA;AAiBA;AACA;AACA,aADA,mBACA,GADA,EACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA,OAPA;AAQA;AARA;AADA,GAjBA;AA6BA;AACA;AACA,QAFA,kBAEA;AACA;AACA;AACA;AACA,KANA;AAOA;AACA,qBARA,+BAQA;AACA;AACA;AACA;AACA,6DAJA,CAMA;;AACA;AACA,KAhBA;AAiBA;AACA,sBAlBA,oCAkBA;AAAA;AAAA;AAAA;;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;;AACA;AACA,KAzBA;AA0BA;AACA,kBA3BA,0BA2BA,KA3BA,EA2BA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;AACA;;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA,KA9BA;AA+BA;AACA,cAhCA,sBAgCA,KAhCA,EAgCA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;AAEA;;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA,KApCA;AAqCA;AACA;AACA,gBAvCA,0BAuCA;AAAA;;AAAA;AAAA;AACA,kBADA,CAEA;;AACA;AACA;AAAA;AAAA;AACA;;AACA;AACA;AACA;;AACA;AACA,KAjDA;AAkDA;AACA,oBAnDA,4BAmDA,IAnDA,EAmDA;AACA;AACA;AACA,KAtDA;AAuDA;AACA,QAxDA,kBAwDA;AACA;AACA,KA1DA;AA2DA;AACA,kBA5DA,0BA4DA,IA5DA,EA4DA;AACA;AACA;AACA,OAFA;AAGA,KAhEA;AAiEA;AACA,kBAlEA,0BAkEA,IAlEA,EAkEA;AACA;AACA;AACA,OAFA;AAGA;AAtEA;AA7BA,C","file":"components/CustomMultiRegion.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./CustomMultiRegion.vue?vue&type=template&id=ade920de&scoped=true&\"\nvar renderjs\nimport script from \"./CustomMultiRegion.vue?vue&type=script&lang=js&\"\nexport * from \"./CustomMultiRegion.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ade920de\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/CustomMultiRegion.vue\"\nexport default component.exports","export * from \"-!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--14-0!../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./CustomMultiRegion.vue?vue&type=template&id=ade920de&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./CustomMultiRegion.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./CustomMultiRegion.vue?vue&type=script&lang=js&\"","<!--\n * @Descripttion: \n * @Date: 2021-09-27 15:23:22\n * @LastEditTime: 2021-09-27 16:10:22\n-->\n<template>\n  <multi-picker label=\"name\" field=\"code\" ref=\"region\"\n    @columnChange=\"handleColumnChange\"\n    @pickerChage=\"handePickerChage\"></multi-picker>\n</template>\n\n<script>\nimport MultiPicker from '@/components/MultiPicker'\n\nimport { area } from '@/constant/regoin/area'\nimport { city } from '@/constant/regoin/city'\nimport { province } from '@/constant/regoin/province'\n\nexport default {\n  name: 'CustomMultiRegion',\n  props: {\n    // 默认选择的省市区数据，可以['浙江省', '杭州市', '滨江区'], [330000, 330100, 330108],根据下面的field字段来判断\n    defaultRegion: {\n      type: Array,\n      default: () => []\n    },\n  },\n  components: {\n    MultiPicker\n  },\n  data () {\n    return {\n      columns: []\n    }\n  },\n  watch: {\n    defaultRegion: {\n      handler(val) {\n        if (val && val.length > 0) {\n          this.initDefaultRegion()\n        } else {\n          this.init()\n        }\n      },\n      immediate: true\n    }\n  },\n  methods: {\n    // 初始化列数据\n    init () {\n      // 如果没有设置默认选中数据，则使用每列的第一列作为省市区数据\n      this.columns = [province, city[province[0].code], area[city[province[0].code][0].code]]\n      this.setColumnsData(this.columns)\n    },\n    // 设置默认已选省市区(回显)\n    initDefaultRegion() {\n      // 设置 省，市，区 列的数据\n      this.columns[0] = province\n      this.switchProvince(this.getRegionIdx(province, 0))\n      this.switchCity(this.getRegionIdx(this.columns[1], 1))\n\n      // 设置默认选中值\n      this.setDefaultData(this.defaultRegion)\n    },\n    // 监听列变化\n    handleColumnChange({ column, value, data }) {\n      if (column === 0) {\n        this.switchProvince(value)\n      } else if (column === 1) {\n        this.switchCity(value)\n      }\n      console.log('handleColumnChange---', column, value, data)\n    },\n    // 切换省，需要更改市，区域数据\n    async switchProvince(value) {\n      this.columns[1] = city[province[value].code]\n      this.switchCity(0)\n    },\n    // 切换市, 需要更改区域数据\n    async switchCity(value) {\n      this.columns[2] = area[this.columns[1][value].code]\n\n      this.setColumnsData(this.columns)\n    },\n    // 返回当前所选中【市】【区】的下标,用于匹配下一列数据\n    // list: 当前列数据， n: 0：省数据 1：市数据 2：区数据\n    getRegionIdx(list = [], n) {\n      let idx = 0\n      // 如果有默认选中项(回显时),则遍历获取对应的下标,否则使用每列的第一项\n      if (this.defaultRegion.length > 0) {\n        idx = list.findIndex((item) => item.code == this.defaultRegion[n])\n      }\n      if (idx < 0) {\n        idx = 0\n      }\n      return idx\n    },\n    // 监听picker选择后变化，或者初始化时\n    handePickerChage(list) {\n      console.log('handePickerChage--', list)\n      this.$emit('handePickerChage', list)\n    },\n    // 打开省市区picker\n    open() {\n      this.$refs.region.open()\n    },\n    // 设置列数据\n    setColumnsData(list) {\n      this.$nextTick(function() {\n        this.$refs.region.setColumns(list)\n      })\n    },\n    // 根据默认值设置列数据(回显)\n    setDefaultData(list) {\n      this.$nextTick(function() {\n        this.$refs.region.initDefaultValue(list)\n      })\n    }\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n\n</style>"],"sourceRoot":""}